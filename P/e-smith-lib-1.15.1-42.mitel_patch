Index: e-smith-lib/e-smith-lib.spec
diff -u e-smith-lib/root/usr/lib/perl5/site_perl/esmith/ethernet.pm:1.15 e-smith-lib/root/usr/lib/perl5/site_perl/esmith/ethernet.pm:1.16
--- e-smith-lib/root/usr/lib/perl5/site_perl/esmith/ethernet.pm:1.15	Tue May  3 11:45:01 2005
+++ e-smith-lib/root/usr/lib/perl5/site_perl/esmith/ethernet.pm	Sun Jun 12 21:37:25 2005
@@ -112,6 +112,8 @@
         $f[0] =~ s/^0x//;
         $f[1] =~ s/^0x//;
         $f[2] =~ s/"//g;
+	# Gracefully handle CentOS4 pcitable format
+        $f[3] ||= "(no description)";
         $f[3] =~ s/"//g;
 
         if ( exists $network_drivers{ $f[2] } )
Index: e-smith-lib/root/usr/lib/perl5/site_perl/esmith/templates.pm
diff -u e-smith-lib/root/usr/lib/perl5/site_perl/esmith/templates.pm:1.55 e-smith-lib/root/usr/lib/perl5/site_perl/esmith/templates.pm:1.56
--- e-smith-lib/root/usr/lib/perl5/site_perl/esmith/templates.pm:1.55	Thu May  5 14:10:41 2005
+++ e-smith-lib/root/usr/lib/perl5/site_perl/esmith/templates.pm	Sun Jun 12 21:37:25 2005
@@ -697,8 +697,8 @@
         # A side effect of this routine is that it removes any old copies or
         # proposed new copies that RPM leaves lying around. (i.e. F<.rpmsave>
         # and F<.rpmnew> files.
-        -f "$outputfile.rpmsave" and unlink "$outputfile.rpmsave";
-        -f "$outputfile.rpmnew"  and unlink "$outputfile.rpmnew";
+        -e "$outputfile.rpmsave" and unlink "$outputfile.rpmsave";
+        -e "$outputfile.rpmnew"  and unlink "$outputfile.rpmnew";
     }
     elsif ( $p{'OUTPUT_TYPE'} eq 'string' ) {
         if ( defined $p{FILTER} ) {
